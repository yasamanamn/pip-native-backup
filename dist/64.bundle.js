(self.webpackChunkHelloWorld=self.webpackChunkHelloWorld||[]).push([[64],{947(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.api=t.API_BASE_URL=void 0;var l,o=n(r(4756)),a=n(r(9293)),u=n(r(6425)),i=n(r(2444)),c=t.API_BASE_URL="https://pip.smart-dev.ir/api";(t.api=u.default.create({baseURL:c})).interceptors.request.use((l=(0,a.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,i.default.getItem("token");case 1:return(r=e.sent)&&(t.headers.Authorization="Bearer ".concat(r)),e.abrupt("return",t);case 2:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),function(e){return Promise.reject(e)})},1017(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.updateBuilding=t.getBuildings=t.getBuildingByCode=void 0;var l,o,a,u=n(r(4756)),i=n(r(9293)),c=r(947);t.getBuildings=(l=(0,i.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,c.api.get("/buildings");case 1:return t=e.sent,e.abrupt("return",t.data);case 2:throw e.prev=2,r=e.catch(0),console.log("API Error:",r),r;case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(){return l.apply(this,arguments)}),t.getBuildingByCode=(o=(0,i.default)(u.default.mark(function e(t){var r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,c.api.get("/buildings/".concat(t));case 1:return r=e.sent,e.abrupt("return",r.data);case 2:throw e.prev=2,n=e.catch(0),console.log("API Error:",n),n;case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e){return o.apply(this,arguments)}),t.updateBuilding=(a=(0,i.default)(u.default.mark(function e(t,r){var n,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,c.api.put("/buildings/".concat(t),r);case 1:return n=e.sent,e.abrupt("return",n.data);case 2:throw e.prev=2,l=e.catch(0),console.log("API Error:",l),l;case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e,t){return a.apply(this,arguments)})},3564(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryCategory=t.FirstPane=void 0;var l=n(r(6540)),o=r(2705),a=this,u="/home/yasi/Documents/backup/v001/App/src/ui/summary/FirstPane.tsx",i=t.SummaryCategory=function(e){return e.SITE_PLANS="SITE_PLANS",e.FLOOR_PLANS="FLOOR_PLANS",e.IMAGES="IMAGES",e.RESPONSES="RESPONSES",e}(i||{}),c=function(e){var t=e.title,r=e.isSelected,n=void 0!==r&&r,i=e.onClick;return l.default.createElement(l.default.Fragment,null,l.default.createElement(o.TouchableOpacity,{style:[s.categoryRow,n&&s.categoryRowSelected],onPress:i,activeOpacity:.7,__self:a,__source:{fileName:u,lineNumber:48,columnNumber:7}},l.default.createElement(o.Text,{style:[s.categoryText,n&&s.categoryTextSelected],__self:a,__source:{fileName:u,lineNumber:56,columnNumber:9}},t)),l.default.createElement(o.View,{style:s.divider,__self:a,__source:{fileName:u,lineNumber:65,columnNumber:7}}))},s=(t.FirstPane=function(e){var t=e.uiState,r=e.onEvent,n=function(e){r({type:"SELECT_CATEGORY",category:e})};return l.default.createElement(o.View,{style:s.container,__self:a,__source:{fileName:u,lineNumber:76,columnNumber:5}},l.default.createElement(o.View,{style:s.surface,__self:a,__source:{fileName:u,lineNumber:77,columnNumber:7}},l.default.createElement(o.ScrollView,{style:s.scrollView,contentContainerStyle:s.scrollContent,showsVerticalScrollIndicator:!1,__self:a,__source:{fileName:u,lineNumber:78,columnNumber:9}},t.sitePlans.length>0&&l.default.createElement(c,{title:"سایت پلان",isSelected:t.selectedCategory===i.SITE_PLANS,onClick:function(){return n(i.SITE_PLANS)},__self:a,__source:{fileName:u,lineNumber:84,columnNumber:13}}),t.floorPlans.length>0&&l.default.createElement(c,{title:"پلان طبقات",isSelected:t.selectedCategory===i.FLOOR_PLANS,onClick:function(){return n(i.FLOOR_PLANS)},__self:a,__source:{fileName:u,lineNumber:92,columnNumber:13}}),t.images.length>0&&l.default.createElement(c,{title:"تصاویر",isSelected:t.selectedCategory===i.IMAGES,onClick:function(){return n(i.IMAGES)},__self:a,__source:{fileName:u,lineNumber:100,columnNumber:13}}),t.forms.length>0&&l.default.createElement(c,{title:"گزارشات/مستندات",isSelected:t.selectedCategory===i.RESPONSES,onClick:function(){return n(i.RESPONSES)},__self:a,__source:{fileName:u,lineNumber:108,columnNumber:13}}))))},o.StyleSheet.create({container:{maxWidth:200},surface:{backgroundColor:"#FFFFFF",borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:6,elevation:6,height:"100%"},scrollView:{flex:1},scrollContent:{borderTopLeftRadius:20,overflow:"hidden"},categoryRow:{width:"100%",backgroundColor:"#FFFFFF",paddingVertical:24,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},categoryRowSelected:{backgroundColor:"#E3F2FD"},categoryText:{fontSize:16,fontWeight:"500",color:"#000000"},categoryTextSelected:{color:"#1976D2"},divider:{height:4,backgroundColor:"#E0E0E0",marginHorizontal:12}}))},3644(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsiveTwoPaneLayout=void 0;var l=n(r(6540)),o=r(2705),a=this,u="/home/yasi/Documents/backup/v001/App/src/ui/summary/ResponsiveTwoPaneLayout.tsx",i=(t.ResponsiveTwoPaneLayout=function(e){var t=e.firstPane,r=e.secondPane,n=(e.isBox,e.style),c=e.breakpoint,s=void 0===c?768:c,m=(0,o.useWindowDimensions)().width>=s;return"web"===o.Platform.OS&&m?l.default.createElement(o.View,{style:[i.container,n],__self:a,__source:{fileName:u,lineNumber:36,columnNumber:7}},l.default.createElement(o.View,{style:i.firstPaneContainer,__self:a,__source:{fileName:u,lineNumber:37,columnNumber:9}},t()),l.default.createElement(o.View,{style:i.secondPaneContainer,__self:a,__source:{fileName:u,lineNumber:40,columnNumber:9}},r())):l.default.createElement(o.View,{style:[i.container,n],__self:a,__source:{fileName:u,lineNumber:50,columnNumber:5}},m&&l.default.createElement(o.View,{style:i.firstPaneContainer,__self:a,__source:{fileName:u,lineNumber:52,columnNumber:9}},t()),l.default.createElement(o.View,{style:[i.secondPaneContainer,!m&&i.fullWidth],__self:a,__source:{fileName:u,lineNumber:56,columnNumber:7}},r()))},o.StyleSheet.create({container:{flex:1,flexDirection:"row",backgroundColor:"#F5F5F5"},firstPaneContainer:{width:200,minWidth:200,maxWidth:250,borderRightWidth:1,borderRightColor:"#E0E0E0",backgroundColor:"#FFFFFF"},secondPaneContainer:{flex:1,backgroundColor:"#FFFFFF"},fullWidth:{width:"100%"}}))},9744(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.SecondPane=void 0;var l=n(r(1132)),o=n(r(6540)),a=r(2705),u=r(3564),i=this,c="/home/yasi/Documents/backup/v001/App/src/ui/summary/SecondPane.tsx",s=function(e){var t=e.title,r=e.floors,n=e.onClick;return o.default.createElement(a.View,{style:b.sectionContainer,__self:i,__source:{fileName:c,lineNumber:50,columnNumber:5}},o.default.createElement(a.View,{style:b.sectionHeader,__self:i,__source:{fileName:c,lineNumber:51,columnNumber:7}},o.default.createElement(a.Text,{style:b.sectionHeaderText,__self:i,__source:{fileName:c,lineNumber:52,columnNumber:9}},t)),o.default.createElement(a.ScrollView,{horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:b.horizontalScrollContent,__self:i,__source:{fileName:c,lineNumber:55,columnNumber:7}},r.map(function(e,t){return o.default.createElement(a.View,{key:t,style:b.thumbnailContainer,__self:i,__source:{fileName:c,lineNumber:61,columnNumber:11}},o.default.createElement(a.TouchableOpacity,{onPress:function(){return e.id&&n(e.id)},activeOpacity:.7,__self:i,__source:{fileName:c,lineNumber:62,columnNumber:13}},o.default.createElement(a.Image,{source:{uri:e.plotThumbUrl},style:b.thumbnailImage,resizeMode:"cover",__self:i,__source:{fileName:c,lineNumber:66,columnNumber:15}})))})))},m=function(e){var t=e.title,r=e.layers,n=e.onClick;return o.default.createElement(a.View,{style:b.sectionContainer,__self:i,__source:{fileName:c,lineNumber:86,columnNumber:5}},o.default.createElement(a.View,{style:b.sectionHeader,__self:i,__source:{fileName:c,lineNumber:87,columnNumber:7}},o.default.createElement(a.Text,{style:b.sectionHeaderText,__self:i,__source:{fileName:c,lineNumber:88,columnNumber:9}},t)),o.default.createElement(a.ScrollView,{horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:b.horizontalScrollContent,__self:i,__source:{fileName:c,lineNumber:91,columnNumber:7}},r.map(function(e,t){return o.default.createElement(a.TouchableOpacity,{key:t,onPress:function(){e.floorId&&e.id&&n(e.floorId,e.id)},activeOpacity:.7,__self:i,__source:{fileName:c,lineNumber:97,columnNumber:11}},o.default.createElement(a.Image,{source:{uri:e.pictureThumbUrl},style:b.thumbnailImage,resizeMode:"cover",__self:i,__source:{fileName:c,lineNumber:106,columnNumber:13}}))})))},f=function(e){var t=e.title,r=e.floors,n=e.onFloorClick;return o.default.createElement(a.ScrollView,{style:b.selectedContent,contentContainerStyle:b.selectedContentContainer,__self:i,__source:{fileName:c,lineNumber:136,columnNumber:5}},o.default.createElement(a.View,{style:b.selectedHeader,__self:i,__source:{fileName:c,lineNumber:140,columnNumber:7}},o.default.createElement(a.Text,{style:b.selectedHeaderText,__self:i,__source:{fileName:c,lineNumber:141,columnNumber:9}},t)),r.map(function(e,t){return o.default.createElement(o.default.Fragment,{key:t,__self:i,__source:{fileName:c,lineNumber:145,columnNumber:9}},o.default.createElement(a.View,{style:b.selectedItemContainer,__self:i,__source:{fileName:c,lineNumber:146,columnNumber:11}},o.default.createElement(a.Text,{style:b.selectedItemTitle,__self:i,__source:{fileName:c,lineNumber:147,columnNumber:13}},function(e){var t=0===e.number?"همکف":"".concat(e.number);if(e.isSite)return"سایت پلان ".concat(e.number);var r=e.isHalf?"نیم طبقه":"طبقه";return"".concat(r," ").concat(t)}(e)),o.default.createElement(a.TouchableOpacity,{onPress:function(){return e.id&&n(e.id)},activeOpacity:.7,__self:i,__source:{fileName:c,lineNumber:148,columnNumber:13}},o.default.createElement(a.Image,{source:{uri:e.plotThumbUrl},style:b.selectedImage,resizeMode:"contain",__self:i,__source:{fileName:c,lineNumber:152,columnNumber:15}}))),o.default.createElement(a.View,{style:b.itemDivider,__self:i,__source:{fileName:c,lineNumber:159,columnNumber:11}}))}))},d=function(e){var t=e.floors,r=e.title,n=e.layers,l=e.onImageClick;return o.default.createElement(a.ScrollView,{style:b.selectedContent,contentContainerStyle:b.selectedContentContainer,__self:i,__source:{fileName:c,lineNumber:186,columnNumber:5}},o.default.createElement(a.View,{style:b.selectedHeader,__self:i,__source:{fileName:c,lineNumber:190,columnNumber:7}},o.default.createElement(a.Text,{style:b.selectedHeaderText,__self:i,__source:{fileName:c,lineNumber:191,columnNumber:9}},r)),n.map(function(e,r){return o.default.createElement(o.default.Fragment,{key:r,__self:i,__source:{fileName:c,lineNumber:195,columnNumber:9}},o.default.createElement(a.View,{style:b.selectedImageItemContainer,__self:i,__source:{fileName:c,lineNumber:196,columnNumber:11}},o.default.createElement(a.Text,{style:b.selectedItemTitle,__self:i,__source:{fileName:c,lineNumber:197,columnNumber:13}},function(e){var r=t.find(function(t){return t.id===e.floorId}),n=0===(null==r?void 0:r.number)?"همکف":"".concat(null==r?void 0:r.number);if(null!=r&&r.isSite)return"سایت پلان ".concat(r.number);var l=null!=r&&r.isHalf?"نیم طبقه":"طبقه";return"".concat(l," ").concat(n)}(e)),o.default.createElement(a.TouchableOpacity,{onPress:function(){e.floorId&&e.id&&l(e.floorId,e.id)},activeOpacity:.7,__self:i,__source:{fileName:c,lineNumber:198,columnNumber:13}},o.default.createElement(a.Image,{source:{uri:e.pictureThumbUrl},style:b.selectedImage,resizeMode:"contain",__self:i,__source:{fileName:c,lineNumber:206,columnNumber:15}})),e.note&&o.default.createElement(a.Text,{style:b.noteText,__self:i,__source:{fileName:c,lineNumber:212,columnNumber:28}},e.note)),o.default.createElement(a.View,{style:b.itemDivider,__self:i,__source:{fileName:c,lineNumber:214,columnNumber:11}}))}))},_=function(e){var t=e.title,r=e.forms,n=e.onFormClick;return o.default.createElement(a.ScrollView,{style:b.selectedContent,contentContainerStyle:b.selectedContentContainer,__self:i,__source:{fileName:c,lineNumber:239,columnNumber:5}},o.default.createElement(a.View,{style:b.selectedHeader,__self:i,__source:{fileName:c,lineNumber:243,columnNumber:7}},o.default.createElement(a.Text,{style:b.selectedHeaderText,__self:i,__source:{fileName:c,lineNumber:244,columnNumber:9}},t)),r.map(function(e,t){return o.default.createElement(a.TouchableOpacity,{key:t,style:b.formItem,onPress:function(){return n(e)},activeOpacity:.7,__self:i,__source:{fileName:c,lineNumber:248,columnNumber:9}},o.default.createElement(a.Text,{style:b.formItemText,__self:i,__source:{fileName:c,lineNumber:254,columnNumber:11}},function(e){switch(e){case"PIP":return"فرم PIP";case"FIRECHECKLIST":return"چک لیست آتش نشانی";default:return e}}(e.formType)))}))},b=(t.SecondPane=function(e){var t=e.uiState,r=e.onFloorPlanDetailClick,n=e.onResponseClick;return o.default.createElement(a.View,{style:b.container,__self:i,__source:{fileName:c,lineNumber:347,columnNumber:10}},function(){switch(t.selectedCategory){case u.SummaryCategory.SITE_PLANS:return o.default.createElement(f,{title:"سایت پلان",floors:t.sitePlans,onFloorClick:function(e){return r(e,null)},__self:i,__source:{fileName:c,lineNumber:271,columnNumber:11}});case u.SummaryCategory.FLOOR_PLANS:return o.default.createElement(f,{title:"پلان طبقات",floors:t.floorPlans,onFloorClick:function(e){return r(e,null)},__self:i,__source:{fileName:c,lineNumber:280,columnNumber:11}});case u.SummaryCategory.IMAGES:return o.default.createElement(d,{title:"تصاویر",floors:[].concat((0,l.default)(t.floorPlans),(0,l.default)(t.sitePlans)),layers:t.images,onImageClick:function(e,t){return r(e,t)},__self:i,__source:{fileName:c,lineNumber:289,columnNumber:11}});case u.SummaryCategory.RESPONSES:return o.default.createElement(_,{title:"گزارشات/مستندات",forms:t.forms,onFormClick:function(e){var r;return n(e.id,null===(r=t.building)||void 0===r?void 0:r.renovationCode)},__self:i,__source:{fileName:c,lineNumber:301,columnNumber:11}});default:return o.default.createElement(a.ScrollView,{style:b.allCategoriesContainer,contentContainerStyle:b.allCategoriesContent,__self:i,__source:{fileName:c,lineNumber:313,columnNumber:11}},t.sitePlans.length>0&&o.default.createElement(s,{title:"سایت پلان",floors:t.sitePlans,onClick:function(e){return r(e,null)},__self:i,__source:{fileName:c,lineNumber:318,columnNumber:15}}),t.floorPlans.length>0&&o.default.createElement(s,{title:"پلان طبقات",floors:t.floorPlans,onClick:function(e){return r(e,null)},__self:i,__source:{fileName:c,lineNumber:326,columnNumber:15}}),t.images.length>0&&o.default.createElement(m,{title:"تصاویر",layers:t.images,onClick:function(e,t){return r(e,t)},__self:i,__source:{fileName:c,lineNumber:334,columnNumber:15}}))}}())},a.StyleSheet.create({container:{flex:1},sectionContainer:{width:"100%",marginBottom:8},sectionHeader:{width:"100%",backgroundColor:"#1976D2",paddingHorizontal:8,paddingVertical:12},sectionHeaderText:{fontSize:16,fontWeight:"500",color:"#FFFFFF"},horizontalScrollContent:{paddingVertical:4,gap:8},thumbnailContainer:{padding:4},thumbnailImage:{height:64,width:64,borderRadius:4},selectedContent:{flex:1},selectedContentContainer:{alignItems:"center",padding:8},selectedHeader:{width:"100%",backgroundColor:"#1976D2",padding:16},selectedHeaderText:{fontSize:24,fontWeight:"600",color:"#FFFFFF"},selectedItemContainer:{alignItems:"center",gap:4,paddingVertical:8},selectedImageItemContainer:{alignItems:"center",gap:4,paddingVertical:8},selectedItemTitle:{fontSize:16,fontWeight:"500",color:"#000000"},selectedImage:{height:128,maxWidth:256,borderRadius:4},noteText:{fontSize:14,color:"#666666",marginTop:4},itemDivider:{width:"100%",maxWidth:256,height:1,backgroundColor:"#D3D3D3",marginVertical:8},formItem:{paddingVertical:12,paddingHorizontal:16,width:"100%"},formItemText:{fontSize:16,color:"#000000"},allCategoriesContainer:{flex:1},allCategoriesContent:{gap:8}}))},220(e,t,r){var n=r(3738);Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryScreenContent=t.SummaryRoute=void 0;var l=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,l,o={__proto__:null,default:e};if(null===e||"object"!=n(e)&&"function"!=typeof e)return o;if(r=t){if(r.has(e))return r.get(e);r.set(e,o)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((l=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(l.get||l.set)?r(o,a,l):o[a]=e[a]);return o}(e)}(r(6540)),o=r(2705),a=r(3564),u=r(9744),i=r(5729),c=r(3644),s=this,m="/home/yasi/Documents/backup/v001/App/src/ui/summary/SummaryScreen.tsx";t.SummaryRoute=function(e){var t=e.buildingId,r=e.onFloorPlanDetailClick,n=e.onBuildingLogClick,o=e.onResponseClick,a=(0,i.useSummaryViewModel)(t),u=a.uiState,c=a.onEvent;return l.default.createElement(f,{uiState:u,onFloorPlanDetailClick:r,onBuildingLogClick:n,onResponseClick:o,onEvent:c,__self:s,__source:{fileName:m,lineNumber:25,columnNumber:5}})};var f=t.SummaryScreenContent=function(e){var t=e.uiState,r=e.onFloorPlanDetailClick,n=(e.onBuildingLogClick,e.onResponseClick),i=e.onEvent;(0,l.useEffect)(function(){if("android"===o.Platform.OS){var e=o.BackHandler.addEventListener("hardwareBackPress",function(){return null!==t.selectedCategory&&(i({type:"CLEAR_SELECTION"}),!0)});return function(){return e.remove()}}},[t.selectedCategory,i]),(0,l.useEffect)(function(){if("web"===o.Platform.OS){var e=function(){null!==t.selectedCategory&&i({type:"CLEAR_SELECTION"})};return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}},[t.selectedCategory,i]),(0,l.useEffect)(function(){if("web"===o.Platform.OS){var e=function(e){"Escape"===e.key&&null!==t.selectedCategory&&i({type:"CLEAR_SELECTION"})};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}},[t.selectedCategory,i]);var f=(0,l.useCallback)(function(){return l.default.createElement(a.FirstPane,{uiState:t,onEvent:i,__self:s,__source:{fileName:m,lineNumber:94,columnNumber:11}})},[t,i]),_=(0,l.useCallback)(function(){return l.default.createElement(u.SecondPane,{uiState:t,onFloorPlanDetailClick:r,onResponseClick:n,__self:s,__source:{fileName:m,lineNumber:100,columnNumber:7}})},[t,r,n]);return l.default.createElement(c.ResponsiveTwoPaneLayout,{style:d.container,isBox:!1,firstPane:f,secondPane:_,__self:s,__source:{fileName:m,lineNumber:110,columnNumber:5}})},d=o.StyleSheet.create({container:{flex:1,backgroundColor:"#F5F5F5"}})},64(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,u.useParams)().buildingId,t=(0,u.useNavigate)();return e?o.default.createElement(a.View,{style:f.container,__self:this,__source:{fileName:s,lineNumber:60,columnNumber:5}},o.default.createElement(a.View,{style:f.header,__self:this,__source:{fileName:s,lineNumber:62,columnNumber:7}},o.default.createElement(a.TouchableOpacity,{style:f.headerBackButton,onPress:function(){t("/")},__self:this,__source:{fileName:s,lineNumber:63,columnNumber:9}},o.default.createElement(i.default,{name:"arrow-back",size:24,color:"#fff",__self:this,__source:{fileName:s,lineNumber:64,columnNumber:11}}),o.default.createElement(a.Text,{style:f.headerTitle,__self:this,__source:{fileName:s,lineNumber:65,columnNumber:11}},"بازگشت به نقشه")),o.default.createElement(a.Text,{style:f.headerSubtitle,__self:this,__source:{fileName:s,lineNumber:67,columnNumber:9}},"کد نوسازی: ",e)),o.default.createElement(a.View,{style:f.content,__self:this,__source:{fileName:s,lineNumber:71,columnNumber:7}},o.default.createElement(c.SummaryRoute,{buildingId:e,onFloorPlanDetailClick:function(e,t){console.log("Floor plan clicked:",{floorId:e,layerId:t}),alert("نمایش جزئیات پلان طبقه ".concat(e).concat(t?" - لایه ".concat(t):""))},onBuildingLogClick:function(e){console.log("Building log clicked:",e),alert("نمایش لاگ ساختمان ".concat(e))},onResponseClick:function(e,t){console.log("Form response clicked:",{formId:e,renovationCode:t}),alert("نمایش فرم ".concat(e).concat(t?" - کد: ".concat(t):""))},__self:this,__source:{fileName:s,lineNumber:72,columnNumber:9}}))):o.default.createElement(a.View,{style:f.errorContainer,__self:this,__source:{fileName:s,lineNumber:18,columnNumber:7}},o.default.createElement(a.Text,{style:f.errorText,__self:this,__source:{fileName:s,lineNumber:19,columnNumber:9}},"خطا: شناسه ساختمان یافت نشد"),o.default.createElement(a.TouchableOpacity,{style:f.backButton,onPress:function(){return t("/")},__self:this,__source:{fileName:s,lineNumber:20,columnNumber:9}},o.default.createElement(i.default,{name:"arrow-back",size:20,color:"#fff",__self:this,__source:{fileName:s,lineNumber:21,columnNumber:11}}),o.default.createElement(a.Text,{style:f.backButtonText,__self:this,__source:{fileName:s,lineNumber:22,columnNumber:11}},"بازگشت")))};var l=n(r(3693)),o=n(r(6540)),a=r(2705),u=r(4976),i=n(r(400)),c=r(220),s="/home/yasi/Documents/backup/v001/App/src/ui/summary/SummaryScreenWeb.tsx";function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var f=a.StyleSheet.create({container:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,l.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({flex:1,backgroundColor:"#F5F5F5"},"web"===a.Platform.OS&&{minHeight:"100vh",height:"100vh"}),header:{backgroundColor:"#0b1020",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#1b2340",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},headerBackButton:{flexDirection:"row",alignItems:"center",gap:8},headerTitle:{color:"#fff",fontSize:18,fontWeight:"600"},headerSubtitle:{color:"#b7bfd3",fontSize:14},content:{flex:1},errorContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#0b1020",padding:20},errorText:{color:"#FF3F33",fontSize:18,marginBottom:20,textAlign:"center"},backButton:{flexDirection:"row",alignItems:"center",backgroundColor:"#1c2440",paddingHorizontal:20,paddingVertical:12,borderRadius:8,gap:8},backButtonText:{color:"#fff",fontSize:16,fontWeight:"600"}})},5729(e,t,r){var n=r(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.useSummaryViewModel=void 0;var l=n(r(4756)),o=n(r(3693)),a=n(r(9293)),u=n(r(5715)),i=r(6540),c=n(r(2444)),s=r(1017);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d="summary_cache_",_="summary_selected_category_";t.useSummaryViewModel=function(e){var t=(0,i.useState)({isLoading:!0,building:null,forms:[],sitePlans:[],floorPlans:[],images:[],selectedCategory:null,details:null,aggs:null}),r=(0,u.default)(t,2),n=r[0],o=r[1];(0,i.useEffect)(function(){var e,t=(e=(0,a.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:return e.next=2,y();case 2:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});t()},[e]),(0,i.useEffect)(function(){null!==n.selectedCategory&&g(n.selectedCategory)},[n.selectedCategory,e]);var m,b,N,p=(m=(0,a.default)(l.default.mark(function t(){var r,n,a,i,s,m,b;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,Promise.all([c.default.getItem(d+e),c.default.getItem(_+e)]);case 1:r=t.sent,n=(0,u.default)(r,2),a=n[0],i=n[1],a&&(s=JSON.parse(a),o(function(e){return f(f(f({},e),s),{},{isLoading:!1})})),i&&(m=i,o(function(e){return f(f({},e),{},{selectedCategory:m})})),t.next=3;break;case 2:t.prev=2,b=t.catch(0),console.error("Error loading cached summary:",b);case 3:case"end":return t.stop()}},t,null,[[0,2]])})),function(){return m.apply(this,arguments)}),y=(b=(0,a.default)(l.default.mark(function t(){var r,n,a,u,i,m,_,b,N,p,y;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(function(e){return f(f({},e),{},{isLoading:!0})}),t.next=1,(0,s.getBuildingSummary)(e);case 1:return r=t.sent,n=r.building||null,a=r.forms||[],u=r.details||{},i=r.aggs||{},m=(null==n?void 0:n.floors)||[],_=m.filter(function(e){return!0===e.isSite}),b=m.filter(function(e){return!1===e.isSite}),N=m.flatMap(function(e){return e.layers||[]}).filter(function(e){return e.pictureUrl&&e.pictureThumbUrl}),p={building:n,forms:a,sitePlans:_,floorPlans:b,images:N,details:u,aggs:i,isLoading:!1},o(function(e){return f(f({},e),p)}),t.next=2,c.default.setItem(d+e,JSON.stringify(p));case 2:t.next=4;break;case 3:t.prev=3,y=t.catch(0),console.error("Error fetching summary data:",y),o(function(e){return f(f({},e),{},{isLoading:!1})});case 4:case"end":return t.stop()}},t,null,[[0,3]])})),function(){return b.apply(this,arguments)}),g=(N=(0,a.default)(l.default.mark(function t(r){var n;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==r){t.next=2;break}return t.next=1,c.default.removeItem(_+e);case 1:t.next=3;break;case 2:return t.next=3,c.default.setItem(_+e,r.toString());case 3:t.next=5;break;case 4:t.prev=4,n=t.catch(0),console.error("Error saving selected category:",n);case 5:case"end":return t.stop()}},t,null,[[0,4]])})),function(e){return N.apply(this,arguments)}),h=(0,i.useCallback)(function(e){switch(e.type){case"SELECT_CATEGORY":o(function(t){return f(f({},t),{},{selectedCategory:e.category})});break;case"CLEAR_SELECTION":o(function(e){return f(f({},e),{},{selectedCategory:null})}),g(null)}},[]),E=(0,i.useCallback)((0,a.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,y();case 1:case"end":return e.stop()}},e)})),[e]),v=(0,i.useCallback)((0,a.default)(l.default.mark(function t(){var r;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,Promise.all([c.default.removeItem(d+e),c.default.removeItem(_+e)]);case 1:t.next=3;break;case 2:t.prev=2,r=t.catch(0),console.error("Error clearing cache:",r);case 3:case"end":return t.stop()}},t,null,[[0,2]])})),[e]);return{uiState:n,onEvent:h,refresh:E,clearCache:v}}}}]);